@inject AppStateService AppStateService

@if (!isUserAdded)
{
<div class="text-center">
    <hr />
    <AuthorizeView>
        <Authorized>
            <MatH6>We will attribute the new challenge to @context.User.Identity.Name!</MatH6><br />
            <MatButton Raised="true" OnClick="@(() => AddUser(@context.User.Identity.Name))">Create Challenge</MatButton><br />
        </Authorized>
        <NotAuthorized>
            <MatH6>Log-in to add a challenge</MatH6>
        </NotAuthorized>
    </AuthorizeView>
    
   
    
    <hr />
    <div class="mainIcon" style="background-image: url('Icons/newChallengeIcon.png')"></div>
</div>
}
else
{
    <CreateChallenge/>
}

@code {
    string username;
    bool isUserAdded;
    void AddUser(string user)
    {
        username = user;
        AppStateService.UpdateUserName(username);
        isUserAdded = true;
        StateHasChanged();
    }
}